### Targets ###

[targets.personal]
type = 'gmail'
credentials = '/path/to/personal-credentials.json'

[targets.work]
type = 'gmail'
credentials = '/path/to/work-credentials.json'

# Maildir target for local delivery
[targets.local]
type = 'maildir'
path = '~/Mail/lkml'

# Maildir target for archiving
[targets.archive]
type = 'maildir'
path = '/mnt/backup/mail'

# JMAP target for Fastmail
[targets.fastmail]
type = 'jmap'
server = 'https://api.fastmail.com'
username = 'user@fastmail.com'
token_file = '~/.config/korgalore/fastmail-token.txt'
# timeout = 60  # Optional: request timeout in seconds (default: 60)

# Alternative: inline token (less secure, for testing)
# [targets.fastmail-inline]
# type = 'jmap'
# server = 'https://api.fastmail.com'
# username = 'user@fastmail.com'
# token = 'your-api-token-here'

# IMAP target for generic IMAP servers
[targets.imap-server]
type = 'imap'
server = 'imap.example.com'
username = 'user@example.com'
folder = 'INBOX'  # Target folder (default: INBOX)
password_file = '~/.config/korgalore/imap-password.txt'
# timeout = 60  # Optional: connection timeout in seconds (default: 60)

# Alternative: inline password (less secure, for testing only)
# [targets.imap-inline]
# type = 'imap'
# server = 'imap.example.com'
# username = 'user@example.com'
# folder = 'Lists/LKML'
# password = 'your-password-here'

### Feeds ###
# Feeds can be defined here and referenced by name in deliveries
# This allows multiple deliveries to share the same feed URL

[feeds.lkml]
url = 'https://lore.kernel.org/lkml'

[feeds.linux-doc]
url = 'https://lore.kernel.org/linux-doc'

[feeds.git]
url = 'https://lore.kernel.org/git'

### Deliveries ###

[deliveries.lkml]
feed = 'lkml'  # References the feed defined above
target = 'work'
labels = ['Lists/LKML']

[deliveries.linux-doc]
feed = 'linux-doc'  # References the feed defined above
target = 'work'
labels = ['Lists/Docs']

[deliveries.git]
feed = 'git'  # References the feed defined above
target = 'personal'
labels = ['INBOX', 'UNREAD']

# Example: Deliver same feed to both Gmail and local maildir archive
[deliveries.lkml-archive]
feed = 'lkml'  # Same feed as lkml delivery above
target = 'archive'  # Maildir target
labels = []  # Labels are ignored for maildir targets

# Example: Deliver to JMAP target (e.g., Fastmail)
[deliveries.lkml-fastmail]
feed = 'lkml'  # References the feed defined above
target = 'fastmail'
labels = ['INBOX', 'Lists/LKML']  # Folder names or roles

[deliveries.git-fastmail]
feed = 'git'  # References the feed defined above
target = 'fastmail'
labels = ['inbox']  # Can use lowercase role names

# Example: Deliver to IMAP server
[deliveries.lkml-imap]
feed = 'lkml'  # References the feed defined above
target = 'imap-server'
labels = []  # Labels are ignored for IMAP (single folder delivery)

# You can also use direct URLs without defining a feed
# [deliveries.example-direct]
# feed = 'https://lore.kernel.org/example'
# target = 'work'
# labels = ['Lists/Example']

# [deliveries.lei-mentions]
# feed = 'lei:/home/user/lei/mentions'
# target = 'work'
# labels = ['INBOX', 'UNREAD']
